{"version":3,"sources":["webpack:///./node_modules/@babel/runtime-corejs2/core-js/date/now.js","webpack:///./node_modules/core-js/library/modules/es6.date.now.js","webpack:///./src/views/topic/topic.vue?79de","webpack:///./src/assets/images/thumbs-up.svg","webpack:///./src/views/topic/topic.vue?6b03","webpack:///src/views/topic/topic.vue","webpack:///./src/views/topic/topic.vue?8f15","webpack:///./src/views/topic/topic.vue","webpack:///./node_modules/core-js/library/fn/date/now.js"],"names":["module","exports","__webpack_require__","$export","S","now","Date","getTime","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_topic_vue_vue_type_style_index_0_id_dd065ac8_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_topic_vue_vue_type_style_index_0_id_dd065ac8_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n","p","render","_vm","this","_h","$createElement","_c","_self","staticClass","_e","loading","_v","_s","detail","title","_f","create_at","attrs","to","author","loginname","visit_count","last_reply_at","tab","on","click","collectionBtn","is_collect","domProps","innerHTML","content","directives","name","rawName","value","reply_count","expression","_l","item","index","key","id","src","avatar_url","alt","replies","$event","likeBtn","ups","length","replyOthers","type","insertReply","sentReply","from","staticRenderFns","topicvue_type_script_lang_js_","data","author_id","now_default","top","simplemde","computed","Object","objectSpread","vuex_esm","beforeRouteEnter","next","vm","fetchTopic","methods","initMarkdownEditor","simplemde_default","a","element","document","getElementById","spellChecker","_this","$axios","get","concat","api","topicDetail","$route","params","then","res","_this2","url","cancelCollection","collection","post","topic_id","isLogin","$toast","querySelector","offsetTop","window","scrollTo","filters","tagName","good","comeFrom","mounted","_this3","$nextTick","console","log","topic_topicvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-7aae5324.140c5d8a.js","sourcesContent":["module.exports = require(\"core-js/library/fn/date/now\");","// 20.3.3.1 / 15.9.4.4 Date.now()\nvar $export = require('./_export');\n\n$export($export.S, 'Date', { now: function () { return new Date().getTime(); } });\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./topic.vue?vue&type=style&index=0&id=dd065ac8&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./topic.vue?vue&type=style&index=0&id=dd065ac8&scoped=true&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/thumbs-up.b296ff53.svg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"topic index-section\"},[_c('div',[_c('div',{staticClass:\"topics-container\"},[(_vm.loading)?_c('Loading'):_vm._e(),(!_vm.loading)?_c('div',{staticClass:\"detail\"},[_c('div',{staticClass:\"topic-top\"},[_c('div',{staticClass:\"topic-title\"},[_c('h1',[_vm._v(_vm._s(_vm.detail.title))])]),_c('div',{staticClass:\"topic-bottom\"},[_c('div',{staticClass:\"topic-info\"},[_c('span',[_vm._v(\" 发布于 \"+_vm._s(_vm._f(\"fromNow\")(_vm.detail.create_at))+\" • 作者 \")]),_c('router-link',{attrs:{\"to\":(\"/user/\" + (_vm.detail.author.loginname))}},[_vm._v(_vm._s(_vm.detail.author.loginname)+\"\\n                            \")]),_c('span',[_vm._v(\" • \"+_vm._s(_vm.detail.visit_count)+\" 次浏览 • 最后一次回复是 \"+_vm._s(_vm._f(\"fromNow\")(_vm.detail.last_reply_at))+\" • 来自 \"+_vm._s(_vm._f(\"comeFrom\")(_vm.detail.tab)))])],1),(_vm.isLogin)?_c('div',{staticClass:\"collection\"},[_c('button',{on:{\"click\":_vm.collectionBtn}},[_vm._v(_vm._s(_vm.detail.is_collect ? '取消收藏' : '收藏'))])]):_vm._e()])]),_c('div',{staticClass:\"content markdown-body\",domProps:{\"innerHTML\":_vm._s(_vm.detail.content)}})]):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.detail.reply_count > 0 && !_vm.loading),expression:\"detail.reply_count > 0 && !loading\"}],staticClass:\"reply\"},[_c('div',{staticClass:\"reply-count\"},[_vm._v(_vm._s(_vm.detail.reply_count)+\" 个回复\")]),_c('ul',_vm._l((_vm.detail.replies),function(item,index){return _c('li',{key:item.id,staticClass:\"reply-item\"},[_c('div',{staticClass:\"avatar\"},[_c('router-link',{attrs:{\"to\":(\"/user/\" + (item.author.loginname))}},[_c('img',{attrs:{\"src\":item.author.avatar_url,\"alt\":\"头像\"}})])],1),_c('div',{staticClass:\"reply-right\"},[_c('div',{staticClass:\"reply-author\"},[_c('span',[_vm._v(_vm._s(index + 1)+\"楼\")]),_c('router-link',{attrs:{\"to\":(\"/user/\" + (item.author.loginname))}},[_vm._v(_vm._s(item.author.loginname))]),_c('span',[_vm._v(_vm._s(_vm._f(\"fromNow\")(item.create_at)))]),(_vm.detail.author.loginname === _vm.detail.replies[index].author.loginname)?_c('strong',[_vm._v(\"作者\")]):_vm._e()],1),_c('div',{staticClass:\"reply-content markdown-body\",domProps:{\"innerHTML\":_vm._s(item.content)}})]),_c('div',{staticClass:\"operation\"},[_c('div',{staticClass:\"thumb\"},[_c('img',{attrs:{\"src\":require('@/assets/images/thumbs-up.svg'),\"alt\":\"点赞\",\"title\":\"点赞人数\"},on:{\"click\":function($event){return _vm.likeBtn(_vm.detail.id, _vm.detail.author, index)}}}),_c('em',[_vm._v(_vm._s(item.ups.length))])]),_c('div',{on:{\"click\":function($event){return _vm.replyOthers(item.author.loginname)}}},[_c('Icon',{attrs:{\"title\":\"回复此楼层\",\"type\":\"reply\"}})],1)])])}),0)]),_c('div',{staticClass:\"insert-reply\"},[_c('div',{staticClass:\"tip\"},[_vm._v(\"添加回复\")]),_c('div',{staticClass:\"reply-btn\"},[_c('textarea',{attrs:{\"id\":\"markdown-editor\"}}),_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":_vm.insertReply}},[_vm._v(_vm._s(_vm.sentReply))])])])],1),(!_vm.loading)?_c('SideBar',{attrs:{\"loginname\":_vm.detail.author.loginname,\"from\":\"topic\"}}):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--话题详情页\n注意: 点赞 & 回复 & 发帖 接口均被cnode社区下线,原因为[太多人为了测试客户端乱发帖]-->\n<template>\n    <section class=\"topic index-section\">\n        <!--数据获取完成前显示loading效果-->\n        <div>\n            <div class=\"topics-container\">\n                <Loading v-if=\"loading\"></Loading>\n                <div class=\"detail\" v-if=\"!loading\">\n                    <div class=\"topic-top\">\n                        <div class=\"topic-title\">\n                            <h1>{{detail.title}}</h1>\n                        </div>\n                        <div class=\"topic-bottom\">\n                            <div class=\"topic-info\">\n                                <span> 发布于 {{detail.create_at | fromNow}} • 作者 </span>\n                                <router-link :to=\"`/user/${detail.author.loginname}`\">{{detail.author.loginname}}\n                                </router-link>\n                                <span> • {{detail.visit_count}} 次浏览 • 最后一次回复是 {{detail.last_reply_at | fromNow}} • 来自 {{detail.tab | comeFrom}}</span>\n                            </div>\n                            <div class=\"collection\" v-if=\"isLogin\">\n                                <button @click=\"collectionBtn\">{{detail.is_collect ? '取消收藏' : '收藏'}}</button>\n                            </div>\n                        </div>\n                    </div>\n                    <!--话题内容 v-html是将detail.content作为html解析到div标签内(双大括号只能将内容解析成普通文字,所以这里需要用到v-html)-->\n                    <div class=\"content markdown-body\" v-html=\"detail.content\"></div>\n                </div>\n                <!--回复区域-->\n                <div class=\"reply\" v-show=\"detail.reply_count > 0 && !loading\">\n                    <div class=\"reply-count\">{{detail.reply_count}} 个回复</div>\n                    <ul>\n                        <li class=\"reply-item\" v-for=\"(item, index) of detail.replies\" :key=\"item.id\">\n                            <div class=\"avatar\">\n                                <router-link :to=\"`/user/${item.author.loginname}`\">\n                                    <img :src=\"item.author.avatar_url\" alt=\"头像\">\n                                </router-link>\n                            </div>\n                            <div class=\"reply-right\">\n                                <div class=\"reply-author\">\n                                    <!--index默认从0开始,所以楼层最开始需要 + 1-->\n                                    <span>{{index + 1}}楼</span>\n                                    <router-link :to=\"`/user/${item.author.loginname}`\">{{item.author.loginname}}</router-link>\n                                    <span>{{item.create_at | fromNow}}</span>\n                                    <strong v-if=\"detail.author.loginname === detail.replies[index].author.loginname\">作者</strong>\n                                </div>\n                                <div class=\"reply-content markdown-body\" v-html=\"item.content\"></div>\n                            </div>\n                            <div class=\"operation\">\n                                <div class=\"thumb\">\n                                    <img @click=\"likeBtn(detail.id, detail.author, index)\"\n                                         :src=\"require('@/assets/images/thumbs-up.svg')\" alt=\"点赞\" title=\"点赞人数\">\n                                    <em>{{item.ups.length}}</em>\n                                </div>\n                                <div @click=\"replyOthers(item.author.loginname)\">\n                                    <Icon title=\"回复此楼层\" type=\"reply\"/>\n                                </div>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n                <!--新建评论-->\n                <div class=\"insert-reply\">\n                    <div class=\"tip\">添加回复</div>\n                    <div class=\"reply-btn\">\n                        <textarea id=\"markdown-editor\"></textarea>\n                        <button type=\"button\" @click=\"insertReply\">{{sentReply}}</button>\n                    </div>\n                </div>\n            </div>\n            <SideBar v-if=\"!loading\" :loginname=\"detail.author.loginname\" from=\"topic\"></SideBar>\n        </div>\n    </section>\n</template>\n\n<script>\n    // 引入markdown编辑器\n    import SimpleMDE from 'simplemde'\n    //引入api配置\n    import API_CONFIG from '@/api/index.js'\n    import {mapState} from 'vuex'\n\n    export default {\n        //给该组件起的名字会显示在vue的devtool中\n        name: 'topic',\n        /* vue实例被创建（created声明周期）时， data对象里所有的属性会被添加到响应式系统里，\n        (也就是说后续在data中额外添加的属性就不是响应式的，所以想让数据是响应式的，\n        必须在vue实例created前就写在data中)\n        当这些属性的值发生改变时，视图会产生'响应'，更新为新的值 */\n        data() {\n            return {\n                loading: true,\n                //回复框下的确认回复按钮默认文字是[回复],当输入好回复内容,点击了确认回复的按钮后,在数据发送完毕之前,按钮的文字变成[发送中]\n                sentReply: '回复',\n                detail: {\n                    author: {\n                        avatar_url: '',\n                        loginname: ''\n                    },\n                    author_id: '',\n                    content: '',\n                    create_at: Date.now(),\n                    id: '',\n                    is_collect: false,\n                    last_reply_at: Date.now(),\n                    replies: [],\n                    reply_count: 0,\n                    tab: '',\n                    title: '',\n                    top: false,\n                    visit_count: 0\n                },\n                simplemde: null\n            }\n        },\n        //计算属性：当依赖的数据改变时，会重新计算后返回新的结果\n        computed: {\n            /*为了及时接收到state的变化，我们应该把状态声明在computed计算属性中，但是当我们想要获取多个state(状态)时，\n            写多个computed计算属性会显得过于麻烦，使用mapState会更方便，mapState方法的作用是将传入的数组或对象转换成computed计算属性能够识别的代码*/\n            /* es6的对象展开运算符，将mapState函数里的对象/数组混入到外部对象（computed这个对象）中\n            如\n            function fn() {return {a: 1, b: 2}\n            let test = {\n            //利用对象展开运算符将return的对象混入到外部对象中\n                ...fn()\n            }\n            console.log(test) //{a: 1, b: 2}\n            */\n            ...mapState(['isLogin', 'userInfo'])\n        },\n        /*在渲染该组件的对应路由被确认前调用\n        无法通过this获取到该组件的实例,因为该导航守卫执行的时候即将进入的这个组件还没有被创建  */\n        beforeRouteEnter(to, from, next) {\n            // 可以通过给next传递一个回调来接收这个实例,这个回调会在导航确认后(navigation confirmed)调用,这个组件的实例将会作为回调的参数传递进去\n            next(vm => {\n                // 当navigation confirmed时,vm是被传递进来的组件实例,调用该组件中的fetchTopic()方法\n                vm.fetchTopic()\n            })\n        },\n        methods: {\n            //初始化markdown编辑器\n            initMarkdownEditor() {\n                this.simplemde = new SimpleMDE({\n                    // 绑定该元素,样式为simplemde的markdown编辑器样式\n                    element: document.getElementById(\"markdown-editor\"),\n                    // 不开启拼写检查\n                    spellChecker: false\n                });\n            },\n            //获取主题详情\n            fetchTopic() {\n                //成功获取数据前先显示loading效果\n                this.loading = true\n                this.$axios.get(`${API_CONFIG.topicDetail}${this.$route.params.id}`)\n                    .then(res => {\n                        //成功获取数据后取消显示loading效果\n                        this.loading = false\n                        this.detail = res.data.data\n                    })\n            },\n            //收藏 / 取消收藏主题\n            collectionBtn() {\n                /*这个方法用于用户点击收藏/取消收藏按钮时的click事件(收藏&取消收藏是同一个按钮);根据话题的收藏状态动态生成api\n                (如: 当前话题的收藏状态为已收藏,url =  `${API_CONFIG.cancelCollection}` ) */\n                let url = this.detail.is_collect ? `${API_CONFIG.cancelCollection}` : `${API_CONFIG.collection}`\n\n                this.$axios.post(url, {\n                    topic_id: this.detail.id\n                })\n                    .then(res => {\n                        /* 将话题的收藏状态取反\n                        (如:原本该话题未收藏,this.detail.is_collect = false,用户点击收藏按钮,\n                        成功向后台发送收藏请求后,this.detail.is_collect = true) */\n                        //由于返回的res中无法获取到后台的is_collect数据，所以这里取反来设置当前data中的is_collect达到响应式视图更新\n                        this.detail.is_collect = !this.detail.is_collect\n                    })\n            },\n            insertReply() {\n                if (!this.isLogin) {\n                    this.$toast('请先登录')\n                } else {\n                    this.$toast('回复API已被cnode社区下线，暂时无法回复!')\n                }\n            },\n            likeBtn() {\n                if (!this.isLogin) {\n                    this.$toast('请先登录')\n                } else {\n                    this.$toast('点赞API已被cnode社区下线，暂时无法点赞')\n                }\n            },\n            //插入评论 (当用户点击确认回复按钮时,click事件触发该方法)\n            /*insertReply() {\n                            if (!this.isLogin) {\n                            this.$toast('请先登录')\n                            }\n\n                            //如果按钮的内容是发送中,说明用户刚刚输入的回复内容还没发送完成,因此不能再次点击按钮重复发送到后台\n                            if (this.sentReply === '发送中...') return\n\n                            //获取用户在回复框中输入的内容\n                            let content = this.simplemde.value()\n                            //没有内容则不进行后续操作,弹出弹出框提醒用户\n                            if (!content) return this.$toast('回复内容不能为空')\n\n                            //回复按钮中的文字切换成发送中,告知用户此时正在发送请耐心等待\n                            this.sentReply = '发送中...'\n\n                            this.$axios.post(`${API_CONFIG.replies}${this.detail.id}/replies`, {\n                                content: `${content}`\n                            })\n                                .then(res => {\n                                    //回复框中的内容重置为空\n                                    this.simplemde.value('')\n                                    //发送完毕后把回复按钮的文字重置为回复\n                                    this.sentReply = '回复'\n                                    //更新内容(这样就可以显示出自己回复的内容)\n                                    this.fetchTopic()\n                                })\n                                .catch(err => {\n                                    console.log(err)\n                                    this.sentReply = '回复'\n                                })\n                        },*/\n            // 点赞 / 取消点赞\n/*            likeBtn(id, author, index) {\n                if (!this.isLogin) {\n                    this.$toast('请先登录')\n                } else {\n                    //点赞前先进行基本判断:是否登录,是否是在赞自己\n                    try {\n                        //如果没登陆,提醒用户登录\n                        if (!this.isLogin) throw new Error('请先登录!')\n                        if (author.loginname === this.userInfo.loginname) throw new Error('不能赞自己')\n                    } catch (e) {\n                        this.$toast(e.message)\n                    }\n\n                    this.$axios.post(`${API_CONFIG.like}${id}/ups`)\n                        .then(res => {\n                            //取消赞\n                            if (res.data.action === 'down') {\n                                //在回复中找到当前楼层(index),并把它的状态改成未点赞\n                                this.detail.replies[index].is_uped = false\n                                //从赞的数组中pop出一个,达到从页面上看赞的数量减少一个的效果\n                                this.detail.replies[index].ups.pop()\n                            } else {\n                                //点赞状态为已点赞\n                                this.detail.replies[index].is_uped = true\n                                //将当前登录用户的id push 到点赞用户列表里\n                                this.detail.replies[index].ups.push(this.userInfo.id)\n                            }\n                        })\n                        .catch(err => {\n                            console.log(err)\n                        })\n                }\n            },*/\n            // 回复其他人 参数是想要回复的那人的名字\n            replyOthers(loginname) {\n                //offsetTop 获取回复框元素到父元素的距离\n                let top = document.querySelector('.insert-reply').offsetTop\n                //滚动到回复框\n                window.scrollTo(0, top)\n                //把需要回复的人的名字用@的形式先添加入回复框\n                this.simplemde.value(`@${loginname}`)\n            }\n        },\n        filters: {\n            //标签名\n            tagName(detail) {\n                if (detail.top) return '置顶'\n                if (detail.good) return '精华'\n            },\n            //来自哪个分类\n            comeFrom(tab) {\n                switch (tab) {\n                    case 'ask':\n                        return '问答'\n                    case 'job':\n                        return '招聘'\n                    case 'dev':\n                        return '测试'\n                    case 'share':\n                        return '分享'\n                }\n            }\n        },\n        mounted() {\n            this.$nextTick(() => {\n                //初始化simplemde的markdown编辑器\n                console.log(document.getElementById('markdown-editor'));\n                this.initMarkdownEditor()\n            })\n        }\n    }\n</script>\n\n<style scoped lang=\"scss\">\n    /*引入scss变量文件*/\n    @import '@/assets/scss/variable.scss';\n\n    .topic {\n        .topics-container {\n\n            .detail {\n                box-shadow: 0 2px 12px 0 rgba(0, 0, 0, .1);\n                position: relative;\n                min-height: 300px;\n                background: #fff;\n\n                .topic-top {\n                    padding: 15px 20px;\n                    border-bottom: 1px solid #eee;\n                }\n\n                .topic-title {\n                    overflow: hidden;\n\n                    h1 {\n                        float: left;\n                        width: calc(100% - 50px);\n                        margin: -4px 5px 0 0;\n                        font-weight: bold;\n                        color: #000;\n                        font-size: 22px;\n                    }\n                }\n\n                .topic-bottom {\n                    margin-top: 10px;\n\n                    a {\n                        color: $themeColor;\n                        font-weight: 600;\n\n                        &:hover {\n                            color: $themeColor;\n                        }\n                    }\n                }\n\n                .collection {\n                    text-align: right;\n\n                    button {\n                        position: relative;\n                        padding: 5px 10px;\n                        background: $themeColor;\n                        color: #fff;\n                        border: none;\n                        font-weight: 500;\n                        border-radius: 3px;\n\n                        &:after {\n                            content: '';\n                            position: absolute;\n                            top: 0;\n                            left: 0;\n                            right: 0;\n                            bottom: 0;\n                            border-radius: 3px;\n                            background: #000;\n                            opacity: 0;\n                        }\n\n                        &:active:after {\n                            opacity: .2;\n                        }\n                    }\n                }\n\n                .operation-edit {\n\n                    i {\n                        cursor: pointer;\n                        font-size: 22px;\n                    }\n                }\n            }\n\n            .content {\n                padding: 10px 20px;\n            }\n\n            .reply {\n                box-shadow: 0 2px 12px 0 rgba(0, 0, 0, .1);\n                margin-top: 15px;\n                border-radius: 3px;\n\n                li {\n                    padding: 10px;\n                    overflow: hidden;\n                    background: #fff;\n                    display: flex;\n                    margin: 5px 10px;\n                    border-bottom: 1px solid #ebedf0;\n                }\n\n                .reply-count {\n                    padding: 10px;\n                    color: rgba(0, 0, 0, 0.85);\n                    font-weight: 600;\n                    border-top: 1px solid #ebedf0;\n                    border-bottom: 1px solid #ebedf0;\n                }\n\n                .avatar {\n                    margin-right: 5px;\n\n                    img {\n                        width: 50px;\n                        height: 50px;\n                        background: #f7f7f7;\n                        object-fit: cover;\n                        border-radius: 3px;\n                    }\n                }\n\n                .reply-author {\n                    float: left;\n\n                    a {\n                        margin: 0 5px;\n                        color: #5f7d6e;\n                        font-weight: 600;\n\n                        &:hover {\n                            color: $themeColor;\n                        }\n                    }\n\n                    strong {\n                        margin-left: 5px;\n                        background: $themeColor;\n                        color: #fff;\n                        border-radius: 1px;\n                        padding: 1px;\n                        font-size: 13px;\n                        font-weight: bold;\n                    }\n                }\n\n                .reply-right {\n                    float: left;\n                    width: calc(100% - 40px);\n                    margin: 0 0 0 10px;\n                }\n\n                .operation {\n                    float: right;\n                    display: inline-flex;\n                    align-items: flex-start;\n\n                    > div {\n                        display: flex;\n                        align-items: center;\n                        margin-left: 7px;\n                    }\n\n                    .thumb {\n                        display: flex;\n                        align-items: center;\n                        font-size: 15px;\n\n                        img {\n                            width: 12px;\n                            height: 15px;\n                            transform: rotate(-15deg);\n                            margin-right: 3px;\n                            cursor: pointer;\n                        }\n                    }\n\n                    i {\n                        margin-left: 10px;\n                        font-size: 20px;\n                        cursor: pointer;\n                    }\n                }\n\n                .reply-content {\n                    clear: left;\n                    font-size: 14px;\n                    padding-top: 10px;\n                }\n            }\n\n            // 新建评论\n            .insert-reply {\n                box-shadow: 0 2px 12px 0 rgba(0, 0, 0, .1);\n                margin-top: 15px;\n                background: #fff;\n\n                &.hidden {\n                    z-index: -1111;\n                    position: fixed;\n                    top: -1000px;\n                    left: -1000px;\n                    visibility: hidden;\n                }\n\n                .tip {\n                    font-weight: 600;\n                    padding: 10px;\n                    background: $boxTopColor;\n                }\n\n                .reply-btn {\n                    padding: 0 10px 10px 10px;\n\n                    button {\n                        position: relative;\n                        color: #fff;\n                        background: #495060;\n                        border-radius: 3px;\n                        padding: 5px 10px;\n                        font-weight: 500;\n                        border: none;\n\n                        &:after {\n                            content: '';\n                            position: absolute;\n                            top: 0;\n                            left: 0;\n                            right: 0;\n                            bottom: 0;\n                            border-radius: 3px;\n                            background: #000;\n                            opacity: 0;\n                        }\n\n                        &:active:after {\n                            opacity: .1;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./topic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./topic.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./topic.vue?vue&type=template&id=dd065ac8&scoped=true&\"\nimport script from \"./topic.vue?vue&type=script&lang=js&\"\nexport * from \"./topic.vue?vue&type=script&lang=js&\"\nimport style0 from \"./topic.vue?vue&type=style&index=0&id=dd065ac8&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dd065ac8\",\n  null\n  \n)\n\nexport default component.exports","require('../../modules/es6.date.now');\nmodule.exports = require('../../modules/_core').Date.now;\n"],"sourceRoot":""}