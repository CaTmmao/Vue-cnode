(function(t){function e(e){for(var a,o,c=e[0],i=e[1],u=e[2],l=0,d=[];l<c.length;l++)o=c[l],s[o]&&d.push(s[o][0]),s[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);f&&f(e);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},o={app:0},s={app:0},r=[];function c(t){return i.p+"js/"+({}[t]||t)+"."+{"chunk-11348b0c":"294e46f1","chunk-16a55fd6":"e2156ef8","chunk-1dee37e6":"476c4e5d","chunk-2739cc5c":"df5ef22b","chunk-2dba8d30":"6976b6a9","chunk-3be26e44":"f47043e6","chunk-9ac8cb22":"5ddc6611","chunk-4b27d168":"15d21aae","chunk-7aae5324":"140c5d8a"}[t]+".js"}function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(t){var e=[],n={"chunk-11348b0c":1,"chunk-16a55fd6":1,"chunk-1dee37e6":1,"chunk-2739cc5c":1,"chunk-2dba8d30":1,"chunk-3be26e44":1,"chunk-4b27d168":1,"chunk-7aae5324":1};o[t]?e.push(o[t]):0!==o[t]&&n[t]&&e.push(o[t]=new Promise(function(e,n){for(var a="css/"+({}[t]||t)+"."+{"chunk-11348b0c":"221b8bcb","chunk-16a55fd6":"7bda552c","chunk-1dee37e6":"3f6ca48f","chunk-2739cc5c":"a71b992e","chunk-2dba8d30":"4f4b2866","chunk-3be26e44":"9aed54a2","chunk-9ac8cb22":"31d6cfe0","chunk-4b27d168":"40ea456b","chunk-7aae5324":"f2fb0dff"}[t]+".css",s=i.p+a,r=document.getElementsByTagName("link"),c=0;c<r.length;c++){var u=r[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===s))return e()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===a||l===s)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var a=e&&e.target&&e.target.src||s,r=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");r.request=a,delete o[t],f.parentNode.removeChild(f),n(r)},f.href=s;var p=document.getElementsByTagName("head")[0];p.appendChild(f)}).then(function(){o[t]=0}));var a=s[t];if(0!==a)if(a)e.push(a[2]);else{var r=new Promise(function(e,n){a=s[t]=[e,n]});e.push(a[2]=r);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=c(t),u=function(e){l.onerror=l.onload=null,clearTimeout(d);var n=s[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src,r=new Error("Loading chunk "+t+" failed.\n("+a+": "+o+")");r.type=a,r.request=o,n[1](r)}s[t]=void 0}};var d=setTimeout(function(){u({type:"timeout",target:l})},12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/vue-cnode/",i.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var f=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"1e39":function(t,e,n){},"29ce":function(t,e,n){},"365c":function(t,e,n){"use strict";var a={login:"https://cnodejs.org/api/v1/accesstoken",topics:"https://cnodejs.org/api/v1/topics",topicDetail:"https://cnodejs.org/api/v1/topic/",collection:"https://cnodejs.org/api/v1/topic_collect/collect",cancelCollection:"https://cnodejs.org/api/v1/topic_collect/de_collect",messageCount:"https://cnodejs.org/api/v1/message/count",fetchMessages:"https://cnodejs.org/api/v1/messages",messageMarkAll:"https://cnodejs.org/api/v1/message/mark_all",messageMarkOne:"https://cnodejs.org/api/v1/message/mark_one/",user:"https://cnodejs.org/api/v1/user/",userCollections:"https://cnodejs.org/api/v1/topic_collect/",like:"https://cnodejs.org/api/v1/reply/",replies:"https://cnodejs.org/api/v1/topic/",newTopics:"https://cnodejs.org/api/v1/topics",updateTopics:"https://cnodejs.org/api/v1/topics/update"};e["a"]=a},3949:function(t,e,n){"use strict";var a=n("29ce"),o=n.n(a);o.a},"3f08":function(t,e,n){"use strict";var a=n("83b9"),o=n.n(a);o.a},"4a4f":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);var a=n("e814"),o=n.n(a),s=(n("cadf"),n("551c"),n("f751"),n("097d"),n("2b0e")),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.scrollToTop,expression:"scrollToTop"}],staticClass:"toTopButton",on:{click:t.goTop}},[n("svg",{staticClass:"icon"},[n("use",{attrs:{"xlink:href":"#icon-to-top"}})])]),n("div",{staticClass:"router-view"},[n("Head"),n("keep-alive",{attrs:{exclude:"User,Collections,Messages,Release"}},[n("router-view")],1),n("Foot")],1)])},c=[],i=n("795b"),u=n.n(i),l=n("5176"),d=n.n(l),f=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},p=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{pre:!0,attrs:{class:"footer"}},[n("div",{pre:!0,attrs:{class:"footer-container"}},[n("div",{pre:!0,attrs:{class:"source-code"}},[n("a",{pre:!0,attrs:{href:"https://github.com/CaTmmao/cnode",target:"_blank"}},[t._v("源码地址")])]),n("div",{pre:!0,attrs:{class:"api"}},[n("ul",[n("li",[n("span",[t._v("CNode社区提供API")]),n("a",{pre:!0,attrs:{href:"https://cnodejs.org",target:"_blank"}},[n("img",{pre:!0,attrs:{src:"https://cnodejs.org/public/images/cnodejs.svg",alt:"cnode"}})])])])])])])}],h={name:"foot"},m=h,g=(n("74e3"),n("2877")),v=Object(g["a"])(m,f,p,!1,null,"6cb1910b",null),b=v.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"header"},[a("div",{staticClass:"header-container"},[a("router-link",{staticClass:"logo-container",attrs:{to:"/"}},[a("img",{attrs:{src:n("5a5b"),alt:"logo"}})]),a("nav",{staticClass:"nav"},[t.isLogin?a("router-link",{attrs:{to:"/release/"+t.userInfo.id,title:"发布话题"}},[a("svg",{staticClass:"icon"},[a("use",{attrs:{"xlink:href":"#icon-release"}})])]):t._e(),t.isLogin?a("router-link",{attrs:{to:"/user/"+t.userInfo.loginname,title:"个人信息"}},[a("svg",{staticClass:"icon"},[a("use",{attrs:{"xlink:href":"#icon-self"}})])]):t._e(),t.isLogin?a("router-link",{class:{"unread-msg":t.messageCount>0},attrs:{to:"/messages",title:"消息"}},[a("svg",{staticClass:"icon"},[a("use",{attrs:{"xlink:href":"#icon-msg"}})])]):t._e(),t.isLogin?a("a",{attrs:{href:"javascript:;",title:"退出"},on:{click:t.logout}},[a("svg",{staticClass:"icon"},[a("use",{attrs:{"xlink:href":"#icon-logout"}})])]):a("router-link",{attrs:{to:"/login",title:"登录"}},[a("svg",{staticClass:"icon"},[a("use",{attrs:{"xlink:href":"#icon-login"}})])])],1)],1)])},_=[],C=n("cebc"),w=n("2f62"),j={name:"Header",computed:Object(C["a"])({},Object(w["b"])(["isLogin","messageCount","userInfo"])),methods:{logout:function(){this.$store.commit("logout"),this.$toast("已登出"),this.$router.push("/login")}}},y=j,x=(n("3949"),Object(g["a"])(y,k,_,!1,null,"25d87386",null)),T=x.exports,O=n("3ce5"),S=n.n(O),$={name:"App",components:{Foot:b,Head:T},data:function(){return{scrollToTop:!1}},created:function(){this.axiosConfig(),this.$store.dispatch("checkLogin")},mounted:function(){this.ifShowScrollButton()},methods:{goTop:function(){window.scrollTo(0,0)},ifShowScrollButton:function(){var t=this;S()(window).on("scroll",function(){S()(window).scrollTop()>100?t.scrollToTop=!0:t.scrollToTop=!1})},axiosConfig:function(){var t=this;this.$axios.interceptors.request.use(function(e){return"post"===e.method&&(e.data=d()({accesstoken:t.$store.state.accesstoken},e.data)),"get"===e.method&&(e.params=d()({accesstoken:t.$store.state.accesstoken},e.params)),e},function(e){return t.$toast(e),u.a.reject(e)})}}},L=$,N=(n("5c0b"),Object(g["a"])(L,r,c,!1,null,null,null)),E=N.exports,M=n("8c4f");s["default"].use(M["a"]);var P=new M["a"]({routes:[{name:"HomePage",path:"/",component:function(){return n.e("chunk-1dee37e6").then(n.bind(null,"37f9"))}},{name:"Login",path:"/login",component:function(){return n.e("chunk-16a55fd6").then(n.bind(null,"dc3f"))}},{name:"User",path:"/user/:loginname",component:function(){return n.e("chunk-11348b0c").then(n.bind(null,"b843"))}},{name:"Collections",path:"/user/:loginname/collections",component:function(){return n.e("chunk-2dba8d30").then(n.bind(null,"a8c2"))},props:function(t){return{loginname:t.params.loginname}}},{name:"Messages",path:"/messages",component:function(){return n.e("chunk-3be26e44").then(n.bind(null,"0cca"))}},{name:"Topic",path:"/topic/:id",component:function(){return Promise.all([n.e("chunk-9ac8cb22"),n.e("chunk-7aae5324")]).then(n.bind(null,"9dff"))}},{name:"Release",path:"/release/:id",component:function(){return Promise.all([n.e("chunk-9ac8cb22"),n.e("chunk-4b27d168")]).then(n.bind(null,"ed56"))}},{name:"NotMatch",path:"*",component:function(){return n.e("chunk-2739cc5c").then(n.bind(null,"efd7"))}}]});P.beforeEach(function(t,e,n){window.scrollTo(0,0),n()});var I=P,U=n("365c"),A=n("bc3a"),B=n.n(A);s["default"].use(w["a"]);var q=new w["a"].Store({state:{accesstoken:window.localStorage.access_token||"",isLogin:!1,userInfo:{loginname:"",id:"",avatar_url:""},messageCount:0},mutations:{logout:function(t){window.localStorage.removeItem("access_token"),t.accesstoken="",t.isLogin=!1},updateLoginState:function(t,e){e.accessToken?(window.localStorage.access_token=t.accesstoken=e.accessToken,t.userInfo=e.userInfo):t.userInfo=e,t.isLogin=!0},updateMessageCount:function(t,e){t.messageCount=e}},actions:{login:function(t,e){var n=t.dispatch,a=t.commit;t.state;a("updateLoginState",e),n("fetchMessageCount")},checkLogin:function(t){var e=t.dispatch,n=t.state;n.accesstoken&&B.a.post(U["a"].login).then(function(t){e("login",t.data)})},fetchMessageCount:function(t){var e=t.commit;B.a.get(U["a"].messageCount).then(function(t){e("updateMessageCount",t.data.data)})}}}),D=n("e069"),H=n.n(D),F=(n("c2b1"),n("7642"),{install:function(){var t;s["default"].prototype.$toast=function(e){if(void 0===t){t=S()('<div class="week-toast"></div>'),S()("body").append(t),t.html(e),t.addClass("toast-show"),clearTimeout(n);var n=setTimeout(function(){t.remove(),t=void 0},2e3)}}}}),G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside",{staticClass:"sidebar"},[n("div",{staticClass:"personal-information"},[t.isLogin?n("div",[n("div",{staticClass:"top"},[t._v("信息")]),n("div",{staticClass:"info"},[n("div",[n("router-link",{attrs:{to:{name:"User",params:{loginname:t.user.loginname}}}},[n("img",{attrs:{src:t.user.avatar_url,alt:"头像"}})]),n("router-link",{staticClass:"nickname",attrs:{to:{name:"User",params:{loginname:t.user.loginname}}}},[t._v("\n                            "+t._s(t.user.loginname)+"\n                        ")])],1),n("span",[t._v("积分： "+t._s(t.user.score))]),n("div",{staticClass:"github"},[t._v("\n                        Github：\n                        "),n("a",{attrs:{title:"点击跳转到github",href:"https://github.com/"+t.user.githubUsername,target:"_blank"}},[t._v("\n                            "+t._s(t.user.githubUsername)+"\n                        ")])]),n("span",[t._v("注册时间： "+t._s(t._f("fromNow")(t.user.create_at)))])])]):n("div",{staticClass:"tourist-box"},[n("p",{staticClass:"cnode"},[t._v("CNode：Node.js专业中文社区")]),n("div",{staticClass:"tourist"},[n("span",[t._v("当前是游客状态，您可以 ")]),n("router-link",{attrs:{to:"/login"}},[t._v("登录")])],1)])])])},J=[],R={name:"side-bar",props:{from:{type:String,default:""},loginname:{type:String},home:{type:String}},data:function(){return{user:{avatar_url:"",id:"",loginname:"",githubUsername:"",score:"",created_at:""}}},computed:Object(C["a"])({},Object(w["b"])(["isLogin"])),mounted:function(){this.getUserInfo()},methods:{getUserInfo:function(){var t=this;"true"===this.home?this.$axios.post(U["a"].login).then(function(e){t.$axios.get("".concat(U["a"].user).concat(e.data.loginname)).then(function(e){t.user=e.data.data})}):this.$axios.get("".concat(U["a"].user).concat(this.loginname)).then(function(e){t.user=e.data.data})}}},z=R,K=(n("a986"),Object(g["a"])(z,G,J,!1,null,"963764a6",null)),Q=K.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"unique-topics-list"},t._l(t.topics,function(e){return"592f8ef01e7e75f60c1ad80d"!==e.id?n("li",{key:e.id},[n("router-link",{staticClass:"img",attrs:{to:{name:"User",params:{loginname:e.author.loginname}}}},[n("img",{attrs:{src:e.author.avatar_url,alt:"头像",title:e.author.loginname}})]),void 0!==e.reply_count?n("div",{staticClass:"count"},[n("em",[t._v(t._s(e.reply_count))]),n("span",[t._v("/")]),n("em",[t._v(t._s(e.visit_count))])]):t._e(),void 0!==e.reply_count?n("span",{staticClass:"tag",class:t.tag(e).className},[t._v(t._s(t.tag(e).text))]):t._e(),n("router-link",{staticClass:"title",attrs:{to:{name:"Topic",params:{id:e.id}},title:e.title}},[t._v(t._s(e.title)+"\n        ")]),n("div",{staticClass:"last-reply-time"},[n("time",{attrs:{title:"最后回复的时间"}},[t._v(t._s(t._f("fromNow")(e.last_reply_at)))])])],1):t._e()}),0)},W=[],X={name:"topic-list",props:{topics:{type:Array,default:function(){return[]},required:!0}},methods:{tag:function(t){if(t.top)return{text:"置顶",className:"top"};if(t.good)return{text:"精华",className:"good"};switch(t.tab){case"ask":return{text:"问答",className:"ask"};case"share":return{text:"分享",className:"share"};case"job":return{text:"招聘",className:"job"};case"dev":return{text:"测试",className:"dev"};default:return{text:"其他"}}}}},Y=X,Z=(n("fb66"),Object(g["a"])(Y,V,W,!1,null,"4c825ddf",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.mark?n("div",{staticClass:"mark-container"},[n("div",{staticClass:"mark-line"}),n("div",{staticClass:"mark-line"}),n("div",{staticClass:"mark-line"})]):n("div",{staticClass:"loading-container"},[n("div",{staticClass:"loading"}),n("div",{staticClass:"loading-text"},[t._v("LOADING")])])])},nt=[],at={name:"loading",props:{mark:{type:Boolean,default:!1}}},ot=at,st=(n("3f08"),Object(g["a"])(ot,et,nt,!1,null,"284160d2",null)),rt=st.exports;s["default"].use(F),s["default"].component("SideBar",Q),s["default"].component("TopicList",tt),s["default"].component("Loading",rt),s["default"].config.productionTip=!1,s["default"].use(H.a),s["default"].prototype.$axios=B.a,s["default"].filter("fromNow",function(t){if(!t)return"";var e=new Date(t),n=(new Date).getTime()-e.getTime();return n<0?"":n/1e3<30?"刚刚":n/1e3<60?o()(n/1e3)+"秒前":n/6e4<60?o()(n/6e4)+"分钟前":n/36e5<24?o()(n/36e5)+"小时前":n/864e5<31?o()(n/864e5)+"天前":n/2592e6<12?o()(n/2592e6)+"个月前":o()(n/31536e6)+"年前"}),new s["default"]({router:I,store:q,render:function(t){return t(E)}}).$mount("#app")},"5a5b":function(t,e,n){t.exports=n.p+"img/cnodejs.86f6a7c2.svg"},"5c0b":function(t,e,n){"use strict";var a=n("5e27"),o=n.n(a);o.a},"5e27":function(t,e,n){},"74e3":function(t,e,n){"use strict";var a=n("82b9"),o=n.n(a);o.a},7642:function(t,e,n){},"82b9":function(t,e,n){},"83b9":function(t,e,n){},a986:function(t,e,n){"use strict";var a=n("4a4f"),o=n.n(a);o.a},c2b1:function(t,e,n){},fb66:function(t,e,n){"use strict";var a=n("1e39"),o=n.n(a);o.a}});
//# sourceMappingURL=app.12767cb1.js.map